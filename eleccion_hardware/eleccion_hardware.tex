\documentclass[spanish,12pt,a4paper,titlepage]{report}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{float}
\usepackage{wrapfig}
\usepackage{multirow}
\usepackage{caption}
\usepackage{babel}
\usepackage[dvips]{hyperref}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{array}
\usepackage[table]{xcolor}
%\usepackage{multirow}
%\usepackage[Sonny]{fncychap}
%\usepackage[Glenn]{fncychap}
\usepackage[Conny]{fncychap}
%\usepackage[Rejne]{fncychap}
%\usepackage[Bjarne]{fncychap}

\setlength{\topmargin}{-1.5cm}
\setlength{\textheight}{25cm}
\setlength{\oddsidemargin}{0.3cm} 
\setlength{\textwidth}{15cm}
\setlength{\columnsep}{0cm}

\begin{document}

\chapter{Elección de Hardware}
%\thispagestyle{plain}
%\pagestyle{fancy}


La elección del Hardware significa una parte muy importante del Proyecto, ya que las decisiones tomadas condicionan el resto del mismo. Una mala elección de alguno de los componentes puede resultar en complicaciones no previstas a la hora de la ejecución, causando contratiempos inesperados y trabajo excesivo. Es necesario entonces para evitar dichos problemas el estudio detallado de cada uno de los componentes a utilizar, comparando características, rendimientos y utilidades. \\
Elegir adecuadamente el Hardware necesario agiliza las etapas siguientes de todo el Proyecto. Resulta fundamental la toma de buenas decisiones, las cuales deben estar basadas en un previo estudio de cada etapa del proyecto, sus requerimientos, un estudio comparativo de las posibles soluciones y el conocimiento cabal de los componentes a utilizar.\\

\section{Elección de plataforma Cuadricópteros}
\vspace*{15pt}

A la hora de la planificación del Proyecto se plantean dos opciones que se diferencian básicamente en el punto de partida. Ambas tienen como objetivo principal dise?ar e integrar un sistema de control que permita al Cuadricóptero mantener un vuelo autónomo, pero una de ellas consta además del en  el dise?o y el armado del mismo. \\Esta última incluye desafíos de ingeniería mecánica, conocimientos de resistencia, flexibilidad y peso de materiales, así como también diversas complicaciones a la hora de fabricar y armar las partes. \\ Teniendo en cuenta que se trata de un proyecto con tiempo acotado y su objetivo se centra en el control del vehículo, la necesidad de partir de con un hardware ya construido resulta imperiosa. Por ello se realiza un estudio sobre las opciones que el mercado ofrece en esta materia. Desafortunadamente las opciones no son muy numerosas, disponiendo de Cuadricópteros comerciales controlados a control remoto. Todos ellos incluyen un peque?o sistema de control integrado de los cuales no es posible obtener información ya que se trata de software privativo. Las opciones que el mercado ofrece son: 
\begin{itemize}
	\item Gaui 330X
	\item XAircraft X650
	\item Turbo Ace X720
\end{itemize}
Se procede a la comparación de los equipos mencionados y se analizan algunos aspectos fundamentales y críticos, como puede ser por ejemplo el peso del dispositivo y la carga útil que puede soportar.


\subsubsection*{Motor}
Al estudiar las posibilidades nos encontramos con que en todos los casos los motores se controlan con modulación por ancho de pulsos, de ahora en más \textbf{PWM} por sus siglas en inglés, técnica en la cual se modifica el ciclo de trabajo de una se?al periódica para controlar la cantidad de energía que se entrega a una carga.\\

	En la tabla \ref{tab:motor} se muestran las características de los motores de los 3 Cuadricópteros considerados.\\

\begin{table}[H]
\begin{tabular}{p{40pt}|p{80pt}|p{130pt}|p{130pt}|} 
\cline{2-4}
& \cellcolor[gray]{0.8} \textbf{GAUI 330X} 
& \cellcolor[gray]{0.8} \textbf{XAircraft X650} 
& \cellcolor[gray]{0.8} \textbf{Turbo Ace X720} \\ \cline{2-4} \hline
\multicolumn{1}{|p{40pt}|}{\cellcolor[gray]{0.8}\textbf{Motor}} 
& Hélices de 8 pulgadas, 4 motores brushless con 4 ESCs de 10A 
& Hélices de 12 pulgadas, 4 motores brushless con 4 ESCs de 10A. Las hélices impulsadas por el motor tienen una eficiencia de 9g/W bajo carga nominal. 
& Hélices de 12 pulgadas, 4 motores brushless con 4 ESCs de 10A. Las hélices impulsadas por el motor tienen una eficiencia de 12g/W bajo carga nominal.\\ \hline
\end{tabular} 
\caption{Comparación motores}
\label{tab:motor}
\end{table}

	Los motores \emph{Brushless} son motores eléctricos alimentados con corriente continua. Tienen un sistema de conmutación eléctrico y presentan relaciones lineales entre \emph{Corriente} y \emph{Torque} y entre \emph{Frecuencia} y \emph{velocidad}. Son comúnmente utilizados en vehículos radio-controlados por su gran eficiencia, potencia, durabilidad y su bajo peso en comparación con los tradicionales motores \emph{Brushed}. Sin embargo, los motores de CC \emph{Brushless} son mucho más complicados de controlar, ya que la fase varía con la rotación del motor. Para controlarlos se utilizan unos dispositivos llamados \emph{Controladores eléctricos de velocidad}, o \textbf{ESCs}. Comúnmente los ESCs se clasifican según su corriente máxima, por ejemplo 10 ampéres o 10A.\\

	Como se puede ver en la tabla \ref{tab:motor}, todos los dispositivos utilizan motores similares y la única diferencia radica en que la eficiencia de los motores del \emph{Turbo Ace X720} es mayor.

\subsubsection*{Tiempo de vuelo}

	El tiempo de vuelo puede resultar crítico según la aplicación considerada. En la tabla \ref{tab:tiempo} se muestran los datos que se obtuvieron para los 3 Cuadricópteros considerados.

\begin{table}[H]
\begin{tabular}{p{40pt}|p{80pt}|p{130pt}|p{130pt}|} 
\cline{2-4}
& \cellcolor[gray]{0.8} \textbf{GAUI 330X} 
& \cellcolor[gray]{0.8} \textbf{XAircraft X650} 
& \cellcolor[gray]{0.8} \textbf{Turbo Ace X720} \\ \cline{2-4} \hline
\multicolumn{1}{|p{40pt}|}{\cellcolor[gray]{0.8}\textbf{Tiempo de vuelo}} 
& Con batería de $2200 mAh$ vuela entre 7 y 20 minutos & Vuela 12 minutos con batería de $2200mAh$ y carga menor a $1.5kg$ & Con batería de $2200mAh$ vuela 15 minutos a carga nominal y puede llegar a la media hora de vuelo con una batería de $10.000mAh$ \\ \hline
\end{tabular}
\caption{Comparación Tiempo de vuelo}
\label{tab:tiempo}
\end{table}

	Como se puede apreciar los tiempos de vuelo son similares en los 3 dspositivos, por lo que no será un factor determinante a la hora de tomar la decisión.\\

	Un factor determinante en el tiempo de vuelo es la batería a utilizar. Deben considerarse 2 aspectos importantes: la capacidad de la batería y su peso. Si bien una batería con mayor capacidad permitirá mayor autonomía de vuelo, es claro que su peso también aumentará, lo cual a su vez, causará un mayor consumo. Los 3 Cuadricópteros en consideración incluyen una batería de 3 celdas de Litio de $2200 \, mAh$.

\subsubsection*{Peso}

	La carga útil que el dispositivo pueda soportar juega un papel fundamental. Vale recordar que además de toda la instrumentación que incluye el Cuadricóptero, se incorporará un Microprocesador, una batería independiente para su alimentación, un giróscopo, un acelerómetro, un GPS y alguna interfaz para la comunicación. A su vez es interesante conservar la posibilidad de integrar una cámara fotográfica convencional ya que puede ser de gran utilidad para numerosas aplicaciones. La fuerza que los motores pueden realizar es acotada, por lo que el peso del dispositivo influye directamente en la carga útil del mismo.

\begin{table}[H]
\begin{tabular}{p{40pt}|p{70pt}|p{160pt}|p{110pt}|} 
\cline{2-4}
& \cellcolor[gray]{0.8} \textbf{GAUI 330X} 
& \cellcolor[gray]{0.8} \textbf{XAircraft X650} 
& \cellcolor[gray]{0.8} \textbf{Turbo Ace X720} \\ \cline{2-4} \hline
\multicolumn{1}{|p{40pt}|}{\cellcolor[gray]{0.8}\textbf{Peso}} 
& $700g$ & Versión de fibra de vidrio: $1100g$. Versión de fibra de carbono: $950g$. & $990g$ \\ \hline
\multicolumn{1}{|p{40pt}|}{\cellcolor[gray]{0.8}\textbf{Carga útil}} 
& $500g$ & Versión de fibra de vidrio: $700g$. Versión de fibra de carbono: $850g$. & $1300 g$ \\ 
\hline 
\end{tabular}
\caption{Comparación peso y carga útil}
\label{tab:peso}
\end{table}

Como se puede ver en la tabla \ref{tab:peso}, no cabe duda que el dispositivo que puede cargar con más peso es el \emph{Turbo Ace X720}, lo cual constituye una ventaja considerable de este dispositivo frente a los otros.

\subsubsection*{Instrumentación}

	Toda la instrumentación que los dispositivos brindan está originalmente destinada al manejo mediante el control remoto. Todos ellos incluyen un acelerómetro y un giróscopo de 3 ejes y traen algún sistema de estabilización incluido de modo de facilitar su control. \\

	Como ya se mencionó, se a?adirá al Cuadricóptero la instrumentación necesaria para su control automático, por lo cual la instrumentación incluida en el dispositivo carece de gran importancia. Sin embargo, resulta interesante conservar la posibilidad de controlarlo mediante el control remoto, ya que puede ser útil tanto en determinadas aplicaciones, como para evitar eventualidades en las primeras pruebas donde se testean los algoritmos de control desarrollados. El algoritmo de control deberá poder alternar entre estos dos modos de vuelo dándole prioridad al control remoto, de modo de conservar la integridad física del dispositivo ante fallas en los algoritmos de control.

\begin{table}[H]
\begin{tabular}{p{40pt}|p{85pt}|p{125pt}|p{130pt}|} 
\cline{2-4}
& \cellcolor[gray]{0.8} \textbf{GAUI 330X} 
& \cellcolor[gray]{0.8} \textbf{XAircraft X650} 
& \cellcolor[gray]{0.8} \textbf{Turbo Ace X720} \\ \cline{2-4} \hline
\multicolumn{1}{|p{40pt}|}{\cellcolor[gray]{0.8}\textbf{Instru- mentación}} 
& Sistema de estabilización integrado \emph{GU344}: incluye giróscopo de 3 ejes y acelerómetro. & Giróscopo de 3 ejes y acelerómetro. Puede usar hasta 13 sensores para chequiar actitud de vuelo, altitud, dirección, posición, temperatura, consumo energético, etc. & Giróscopo y acelerómetro de 3 ejes integrados. Se vende por separado el módulo GPS que incluye barómetro como medidor de altitud y el compás electrónico.\\ 
\hline 
\end{tabular}
\caption{Comparación instrumentación}
\label{tab:instrumentacion}
\end{table}

	En la tabla \ref{tab:instrumentacion} se muestra un resumen de la instrumentación incluida en cada Cuadricópetro. 

\subsubsection*{Control}

	El control mediante el mando remoto requiere de cierta práctica y habilidad para ejecutarlo de buena forma, por lo cual todos los algoritmos de control integrados que el dispositivo incluya significarán una interesante ventaja. Por otro lado se debe tener en cuenta que el control remoto se utilizará en reducidos casos, siendo el control automático el verdadero interés del proyecto. Es importante tener en cuenta que dichos algoritmos encarecen el precio del dispositivo y no serán utilizados con mucha frecuencia.

\begin{table}[H]
\begin{tabular}{p{40pt}|p{70pt}|p{160pt}|p{110pt}|} 
\cline{2-4}
& \cellcolor[gray]{0.8} \textbf{GAUI 330X} 
& \cellcolor[gray]{0.8} \textbf{XAircraft X650} 
& \cellcolor[gray]{0.8} \textbf{Turbo Ace X720} \\ \cline{2-4} \hline
\multicolumn{1}{|p{40pt}|}{\cellcolor[gray]{0.8}\textbf{Control}} 
& - & Software de configuración incluido. Dispositivo de control de 4 velocidades dise?ado todo en 1. Soporta protocolos $Ultra$ $PWM$ y control de frecuencia hasta $500Hz$. Posee algoritmos de control de vuelo incorporados que hacen q sea mas fácil volarlo & Nivelación automática con control de altitud \\ 
\hline 
\end{tabular}
\caption{Comparación control}
\label{tab:control}
\end{table}

	Si bien el \emph{XAircraft X650} es el que tiene más algoritmos de control implementados que facilitan su mando, se considera que el dispositivo que se adecúa más a nuestras necesidades es el \emph{Turbo Ace X720}. Tiene un peque?o sistema de estabilización que ayuda a la hora de su control, pero no incluye demasiado software ni hardware que no será utilizado y encarecen al producto, como el \emph{XAircraft X650}.

\subsubsection*{Dimensiones}

	Las dimensiones de los 3 Cuadricópteros considerados se pueden apreciar en la tabla \ref{tab:dimensiones}.

\begin{table}[H]
\begin{tabular}{p{40pt}|p{80pt}|p{130pt}|p{130pt}|} 
\cline{2-4}
& \cellcolor[gray]{0.8} \textbf{GAUI 330X} 
& \cellcolor[gray]{0.8} \textbf{XAircraft X650} 
& \cellcolor[gray]{0.8} \textbf{Turbo Ace X720} \\ \cline{2-4} \hline
\multicolumn{1}{|p{40pt}|}{\cellcolor[gray]{0.8}\textbf{Dimen- siones}} 
& 33 cm entre ejes diagonalmente opuestos & 61.5 cm entre ejes diagonalmente opuestos & 61.5 cm entre ejes diagonalmente opuestos \\ 
\hline 
\end{tabular}
\caption{Comparación dimensiones}
\label{tab:dimensiones}
\end{table}

	Como se puede ver el \emph{GAUI} es el más peque?o, mientras que los otros dos tienen el mismo tama?o aproximadamente

	En la figura \ref{fig:cuadricopteros} se pueden apreciar fotografías de los 3 equipos considerados.

\begin{figure} [h!]
  \centering
  \subfloat[GAUI 330X]{\label{fig:gaui}
  		\includegraphics[width=0.3\textwidth]
  			{./Pics/gaui.png}}
  \subfloat[XAircraft X650]{\label{fig:aircraft} 
  		\includegraphics[width=0.36\textwidth]
  			{./Pics/aircraft.png}}
  \subfloat[Turbo Ace X720]{\label{fig:turboace} 
  		\includegraphics[width=0.32\textwidth]
  			{./Pics/turboace.png}}
  \caption{Fotos de las posibles plataformas a utilizar}
  \label{fig:cuadricopteros}
\end{figure}

\subsection{Definición de la plataforma - Cuadricópetro}

\begin{itemize}
	\item El \emph{Turbo Ace X720} tiene hélices de 12 pulgadas y el grupo hélice motor proporciona una eficiencia de $12\,g/W$, superando a los otros dos Cuadricópteros considerados.
	\item La carga útil que puede trasportar el \emph{Turbo Ace X720} es la mayor de todos los considerados
	\item El \emph{Turbo Ace X720} trae un sistema de nivelación automática y estabilización que resultará útil al momento de controlarlo con el mando remoto. Además no incluye excesivas utilidades para este mando que no serán utilizadas y contribuyen a encarecer el precio.
\end{itemize}

	Por todas las razones expuestas anteriormente y los análisis comparativos realizados se tiene que la opción que mejor se adecúa a nuestro proyecto es el \textbf{Turbo Ace X720}. 

\newpage
\section{Inteligencia}
\vspace*{15pt}

Además de la plataforma física, deben seleccionarse componentes electrónicos capaces de procesar la información proveniente de los sensores, computar y ejecutar los algoritmos de control y generar las señales necesarias para transmitir las instrucciones a los motores.\\
\\
Será necesario, entonces, seleccionar uno (o varios) componentes capaces de desarrollar las tareas mencionadas. Para ello, el sistema elegido deberá contar con:

\begin{itemize}
\item Un microprocesador con suficiente poder de computo
\item Un sistema de entradas y salidas que permita interactuar con la instrumentación y con el sistema de control de motores
\item Un sistema de memoria no voláil que permita mantener cargado el programa de control
\item Elementos de comunicación para establecer conexión con un PC
\item Un sistema de potencia que brinde energía al sistema con una autonomía suficiente
\end{itemize}

Dado que el sistema utilizará motores brushless, es necesario contar con un sistema capaz de generar señales PWM, ya sea mediante software, hardware o ambas, para controlar los motores.\\
\\
También será necesario que el sistema seleccionado tenga una interfaz UART que permita la comunicación con los sensores involucrados.\\
\\
Es evidente que la elección de la inteligencia no puede realizarse en forma independiente, sino que estará fuertemente condicionada por la elección del resto de la arquitectura del sistema final. Por ello, las decisiones tomadas serán afectadas considerablemente por las características del resto de los componentes del sistema.\\
\\
%Micro. decir pa q lo usamos, q tiene q hacer. payar
Teniendo en cuenta las restricciones anteriores, se seleccionaron varias arquitecturas posibles en una primera etapa. Se realizo un primer estudio de las diversas posibilidades ofrecidas, manejándose varias opciones.\\
\\
Varias de ellas fueron descartadas por no cumplir todos los requisitos arriba mencionados. De la opciones que sí verificaban dichos requisitos fueron descartadas aquellas que implicaban más de un componente, optándose por considerar las opciones que fueran capaces de proveer todas las opciones arriba mencionadas integradas en una única placa.\\
\\
Una vez realizado un primer análisis de las vastas posibilidades disponibles en el mercado se pre-seleccionaron las siguientes opciones:

\begin{enumerate}
\item Beagleboard XM

\item Gumstix Overo Fire
\end{enumerate}
A continuación se desarrollaran y compararán las características fundamentales de ambas opciones, permitiendo así la selección de alguno de ellos en virtud de los requisitos del sistema que se desea implementar. 

\subsection*{Procesadores: CPU y DSP}
Es claro que el procesador es un componente determinante, pues será el encargado de computar completamente los algoritmos de control. También se encargará de manejar parte de la comunicación con la instrumentación y elementos de control. Finalmente, deberá ser capaz de manejar información proveniente de los canales de comunicación establecidos con un PC.

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{CPU}} 
&ARM Cortex A8 1Ghz,  256KB L2 cache, 1200 MIPS &ARM Cortex A8 720Mhz, 256KB L2 cache, 1200 MIPS \\ 
\hline 
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{DSP}} 
&TMS320C64x+, 800Mhz &TMS320C64x+, 520Mhz\\
\hline
\end{tabular}
\caption{Procesadores}
\label{tab:procesadores}
\end{table}

Resulta evidente que ambas opciones presentan el mismo procesador, con la salvedad que ambos procesadores de la Beagleboard presentan una mayor frecuencia de reloj. 

\subsection*{Memoria}

La memoria disponible en el sistema (tanto estática como volátil) resulta de vital importancia, pues será allí que se guardará la información del programa de control, configuraciones, etc. Adicionalmente, es necesario contar con suficiente memoria volátil a la hora de procesar datos y ejecutar los algoritmos de control.\\

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Volátil(RAM)}} 
&512Mb & 256Mb\\ 
\hline 
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Estática}} 
&Sin memoria interna.  Soporta microSD de hasta 4Gb  &256Mb de memoria interna\\
\hline
\end{tabular}
\caption{Memoria}
\label{tab:memoria}
\end{table}

La superioridad de la Beagleboard en cuanto a memoria resulta evidente a partir del análisis anterior.

\subsection*{Dimensiones y peso}

Si bien no resulta una caracetrística determinante, es conveniente que las dimensiones y peso de la placa elegida sean lo menores posibles, de forma de no ocupar gran parte de la carga útil del cuadricóptero con electrónica asociada a la inteligencia implementada.\\

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Dimensiones}} 
&85.09x87.63mm &17x58mm\\ 
\hline 
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Peso}} 
&36g &5.6g\\
\hline
\end{tabular}
\caption{Memoria}
\label{tab:memoria}
\end{table}
En cuanto a dimiensiones y peso, la placa Gumstix Overo Fire parece ser más adecuada.

\subsection*{Programación y Sistema Operativo}

Es importante tener en cuenta como será realizada la programación de los sistemas considerados (dónde se almacena el programa, hardware necesario para la programación, etc.) En particular, es conveniente poder contar con algún sistema operativo que facilite la tareas de programación, testeo y debugging.

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Sistema Operativo}} 
&Booteable desde microSD &Booteable desde microSD\\ 
\hline 
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Programación}} 
&A través de SO. Puerto JTAG de 14 pines &A través de SO\\
\hline
\end{tabular}
\caption{Memoria}
\label{tab:memoria}
\end{table}

Es claro que la placa Beagleboard parece ser mejor en cuanto a sus prestaciones de programación.

\subsection*{Alimentación y Energía}

La forma en que la placa elegida es alimentada, así como el grado de autonomía que pueda lograrse con la misma deben ser tenidos en cuenta.\\
Lograr un nivel de autonomía lo suficientemente grande permitirá que el sistema se mantenga en vuelo durante un tiempo mayor. Idealmente, la autonomía de la alimentación de la inteligencia no debería ser el factor determinante del tiempo de vuelo del dispositivo.

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Alimentación}} 
& BeagleJuice. Sistema de alimentación diseñado especificamente para la Beagleboard. (Dimensiones idénticas a la misma. Conector estándar para BeagleBoard).
& Alimentado desde una Daughter board: Zippy Flightmax 2200mAh 3S1P\\ 
\hline 
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Voltaje. Intensidad de Corriente. Capacidad}} 
&5V. 1.5A. 4500mAh & 11.1V.44A (= 2200mA x 1P x 20C).2200mAh 20C.\\
\hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Autonomía}} 
&6.5 horas &No especificado\\
\hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Dimensiones}} 
&85.09x87.63x10mm &102x37x24mm\\
\hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Peso}} 
&40g &180g\\
\hline
\end{tabular}
\caption{Alimentación}
\label{tab:alimentacion}
\end{table}

Resulta evidente que la Beagleboard resulta superior en cuanto a alimentación disponible, dado que el pack de baterías BeagleJuice fue diseñado específicamente para brindar alimentación a la misma.

\subsection*{Puertos e I/Os}

Los puertos disponibles para entradas, salidas y/o comunicación serán también un factor determinante a la hora de definir la arquitectura del sistema, pues es imperativo que el sistema de control pueda comunicarse con los sensores, el sistema de control de motores, etc.

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Puertos}} 
&\begin{itemize}
\item 14 pin JTAG
\item UART
\item 28 pin exp
\item LCD
\item DVI-D
\item S-VIDEO
\item Stereo in/out
\item USB-OTG
\item RS232
\item EHCI
\item 4 USBs
\item 10/100Mbps Ethernet
\end{itemize}
&\begin{itemize}
\item wifi
\item bluetooth
\item 2x70 pin expansion board port
\item 27 pin camara port
\end{itemize}\\
\hline
\end{tabular}
\caption{Puertos}
\label{tab:puertos}
\end{table}

Cada opción presenta ventajas y desventajas con respecto a los puertos disponibles. Si bien la Beagleboard parece tener una mayor variedad de puertos, la Gumstix Overo Fire cuenta con puertos WiFi y Bluetooth integrados, lo cual resulta ser una ventaja considerable en términos de comunicación.

\subsection*{Comunicación}

Es deseable que el sistema posea algún tipo de comunicación inalámbrica integrada.

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{WiFi}} 
&No &Sí\\ 
\hline 
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Bluetooth}} 
&No &Sí\\
\hline
\end{tabular}
\caption{Comunicación}
\label{tab:comunicacion}
\end{table}

La Gumstix Overo Fire resulta claramente superior en este aspecto.

\subsection*{Precio}

El precio resulta ser, evidentemente, un factor importante a tener en cuenta.

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Precio}} 
&149USD &220USD\\ 
\hline 
\end{tabular}
\caption{Precio}
\label{tab:precio}
\end{table}

Dada la diferencia de precios, sería deseable utilizar la Beagleboard, siempre y cuando esto vaya en detrimento del desempeño final del sistema.

\subsection*{Otras características}

Se presentan, a continuación, algunas características propias relevantes de cada uno de los sistemas propuestos.

\begin{table}[H]
\begin{tabular}{p{130pt}|p{130pt}|p{130pt}|} 
\cline{2-3}
& \cellcolor[gray]{0.8} \textbf{Beagleboard XM} 
& \cellcolor[gray]{0.8} \textbf{Gumstix Overo Fire} \\ \cline{1-3} \hline
\multicolumn{1}{|p{130pt}|}{\cellcolor[gray]{0.8}\textbf{Otras características}} 
&\begin{itemize}
\item Existencia de Camera Boards integrables directamente en un puerto dedicado
\item Existencia de la biblioteca OpenCV de visión computacional, optimizada para ser utilizada por Beagleboard.
\end{itemize}

&\begin{itemize}
\item Existencia de gran variedad de daughter boards con diversas funcionalidades.
\end{itemize}\\ 
\hline 
\end{tabular}
\caption{Otras caraterísitcas}
\label{tab:otras}
\end{table}

Si se tiene en cuenta el objetivo secundario  planteado (desarrollar un algoritmo de tracking visual), la Beagleboard parece ser más adecuada.

\subsection{Definición de la inteligencia}
\vspace*{15pt}

En virtud del análisis anterior puede asegurarse que:

\begin{itemize}
\item La placa Beagleboard parece ser superior en los siguientes aspectos:
	\subitem Procesadores
	\subitem Memoria
	\subitem Programación y Sistema Operativo
	\subitem Alimentación
	\subitem Puertos e I/Os
	\subitem Precio
\item La placa Gumstix Overo Fire parece ser superior en los siguientes aspectos:
	\subitem Dimensiones y Peso
	\subitem Comunicación
\item Cada placa presenta sus características únicas, lo cual provee ventajas y desventajas para ambas arquitecturas posibles. Si se tiene en cuenta el objetivo secundario del proyecto, it est, la implementación de un sistema capaz de realizar tracking visual mediante una cámara, un sistema basado en la placa Beagleboard parecería ser más adecuado.
\end{itemize}

Teniendo en cuenta las observaciones anteriores, se optó por construir el sistema en base a una arquitectura basada en la placa Beagleboard.

\section{Comunicación}
\vspace*{15pt}

La inteligencia debe comunicarse con dos bloques del sistema: el de los sensores y el de los motores sobre los cuales se actúa. Además es necesario comunicar a la intelegencia con una PC con el objetivo de programar tanto los algoritmos de control como los rumbos del sistema. 
 
\subsection{Comunicación con PC}
\vspace*{15pt}
La placa elegida posee diversos puertos USB, por dicho motivo se pueden utilizar dichos puertos para obtener una comunicación directa con la PC. Dicha comunicación sirve para programar el sistema en una primera etapa, sin embargo no parece la forma más adecua de comunicarse con el quadcopter mientras el mismo se encuentra en el aire para reprogamar una ruta, o para modificar algún detalle de un algoritmo. Por dicho motivo se opta por alguna comunicación de tipo inalámbrica. Las opciones que consideradas fueron: WiFi, Bluetooth y GSM. Al poseer en la intelegencia un kernel de linux, la comunicación vía WiFi es muy sencilla de implementar. Por dicho motivo se opta por este tipo de comunicación. Al disponer de diversos puertos USB en la inteligencia se opta por un módulo WiFi USB.    


\subsection{Comunicación con instrumentación}
\vspace*{15pt}

En lo que respecta a la comunicación con la instrumentación se disponen de diversas opciones. Se tiene la posibilidad de comunicarse a través de un protocolo serie, I2C o incluso puertos USB. Por dicho motivo este aspecto no será analizado cabalmente en esta sección sino que se realizará al momento de analizar las opciones de comunicación.  

\subsection{Comunicación con motores}
\vspace*{15pt}

Los motores como se explicó anteriormente funcionan mediante PWM. Por lo tanto, la comunicación entre la inteligencia y los motores será cableada. La se?al de entrada de los ESC's se conectará directamente a los pines de salida de la inteligencia donde se programen los PWM. 

\newpage
\section{Instrumentación}
\vspace*{15pt}
Para poder controlar el sistema es importante poder conocer los valores que toman las variables del mismo. Como se verá en el capítulo sobre el desarrollo del modelo físico del quadcopter, las variables que es necesario conocer son: La aceleración en las tres coordenadas y la velocidad angular del sistema. Por dicho motivo parece imprescindible dotar al sistema de sensores capaces de medir dichas magnitudes.

\newpage
\subsection{Acelerómetro}
\label{acelerometro}
\vspace*{15pt}

Previo a definir el acelerómetro, su principio básico de funcionamiento y su interés en la aplicación presentada se debe realizar una discusión física sobre la caída libre como sistema de referencia.
En la física clásica, la fuerza gravitatoria que se ejerce sobre una masa es proporcional a la intensidad del campo gravitatorio en la posición en la cual se encuentra. 
La teoría general de la relatividad es una teoría métrica de la gravitación. Los fenómenos que en la mecánica clásica se le atribuyen a la acción de la fuerza de gravedad, corresponden a movimientos inerciales en una geometría curvada del espacio-tiempo en la teoría de la relatividad general.

Por lo tanto, desde el punto de vista de la física clásica, un sistema de referencia en caída libre es un sistema acelerado por la fuerza de la gravedad, y como tal, es no inercial.
Por el contrario, desde el punto de vista de la física relativista, el sistema está acelerado en el espacio, pero no en el espacio-tiempo, por lo tanto el sistema de referencia es inercial.

Saldada esta discusión se define un acelerómetro como un dispositivo capaz de medir su aceleración propia en el marco de referencia de la caída libre relativista. Esto implica que el dispositivo no mide siempre su cambio de velocidad en el espacio.
Por ejemplo, la medida de un acelerómetro en caída libre será cero a pesar de que su velocidad crezca, de la misma forma se puede observar que un acelerómetro en reposo respecto de la Tierra, no dará una medida nula, sino que por el contrario medirá como aceleración g.
% voy a hablar un poco de xq elejimos acelerometros en un chip (costo, peso) así no tengo que explicar el funcionamiento de todos los tipos de acelerómetros que son re distintos.
Existen diversos tipos de acelerómetro, en este caso se eligió trabajar con un acelerómetro contenido en un circuito integrado (tecnología MEMS). Las razones de esta elección son fundamentalmente, tama?o y peso (críticos en la aplicación) y económicos. Los mismos son más peque?os, livianos y baratos que otras tecnologías.
Dicho acelerómetro, procesa las medidas y las convierte a una salida eléctrica, la forma de dicha salida depende si el integrado es analógico, o digital.
Los acelerómetros basados en tecnologías MEMS miden cambios internos, de la transferencia de calor causada por la aceleración, ofreciendo ventajas significativas sobre el empleo de una estructura tradicional sólida de masas de prueba.
Ya que la masa de prueba en el dise?o de los sensores MEMS son moléculas de gas, las estructuras móviles mecánicas son eliminadas dentro del acelerómetro.

%TODO Referencia a MEMS
Un acelerómetro de tres ejes, no es otra cosa que un acelerómetro capaz de medir su aceleración propia en tres ejes de coordenadas.

%TODO capaz que hay que cambiar esto... depende que información usemos para realimentar el quad
Resulta fundamental dotar al uQuad de un acelerómetro, el mismo será utilizado para obtener la aceleración lineal en cada instante. Integrando esta información se puede obtener la velocidad con la que se desplaza el sistema y por ende se puede obtener la posición del mismo conociendo la posición de partida.
Este instrumento, no provee toda la información necesaria, para realizar el control del sistema. El sistema, presenta 6 grados de libertad; las tres coordenadas de su centro de masa, y los tres ángulos que determinan su orientación.
En particular, el acelerómetro no detecta giros. Por lo tanto es incapaz de aportarnos toda la información necesaria. Es imprescindible entonces dotar al uQuad de un giróscopo. 
 





\newpage
\subsection{Giróscopo}
\label{giro}
\vspace*{15pt}

Un giróscopo es un instrumento que mide la velocidad angular del sistema en un marco de referencia inercial como el definido en la sección anterior. Las mismas restricciones sobre tama?o, peso y costos que se aplicaban para el acelerómetro se aplican aquí. Por dicho motivo vuelve a optar por un instrumento de tecnología MEMS. Los giróscopos construidos con esta tecnología basan su funcionamiento 
%TODO funcionamiento del giróscopo

%TODO exiplicar errores integration drift
Desde el punto de vista teórico, procesando la información obtenida a partir del acelerómetro y del giróscopo se puede conocer en todo momento la posición del sistema y su orientación a partir de las condiciones iniciales.
Sin embargo, en la práctica esto no sucede así. Todas las medidas realizadas tienen un cierto error. Para obtener la orientación y la posición a cada instante se deben integrar las medidas obtenidas. Por lo tanto, se integra también el error. Esto produce una acumulación de errores que afecta de forma considerable el resultado final luego de cierta cantidad de muestras. Por lo tanto parece razonable, poder cotejar los datos que se obtienen mediante este método con datos obtenidos mediante otras fuentes. Es a partir de esta problemática que surge la necesidad de contar con un GPS. Se puede, cada cierto intervalo de tiempo, observar en cuanto difieren los resultados obtenidos integrando las medidas de los sensores con los datos que aporta el GPS, de esta forma se pueden corregir los errores debido al \emph{integration drift}.

\newpage
\subsection{GPS}
\vspace*{15pt}



\newpage
\subsection{Definición de instrumentación}
\vspace*{15pt}


%TODO Acelerómetro + giróscopo Pater
En la secciones \ref{acelerometro} y \ref{giro} se detalló el porqué de la elección de la tecnología MEMS para el acelerómetro y el giróscopo. Las razones fundamentales son el costo, tama?o y peso de los instrumentos, siendo los últimos dos críticos en la aplicación.
A partir de esta definición surgen dos posibilidades, integrar los instrumentos dise?ando un PCB o adquirir uno en el cual se encuentren los dos sensores. Al dise?ar un PCB se reduce el costo de la instrumentación. El precio de cada chip ronda los 5 U\$S, sumado al precio de algunas resistencias, capacitores y otros materiales necesarios para la construcción del PCB (Placa de cobre, percloruro, esta?o, etc) hacen un total muy inferior al costo de comprar una placa ya armada (más de 60 U\$S). Sin embargo, el proceso de dise?o del PCB extiende los plazos en gran medida, se debe dise?ar el circuito, construir y verificar su funcionamiento. El proceso mencionado tendrá probablemente una duración superior a las dos semanas, lo cual implica un retraso en varios aspectos del proyecto ya que diversas tareas previamente definidas dependen fuertemente del funcionamiento de la instrumentación. Por otra parte el peso que representa el costo de adquirir una placa en la que se incluyan ambos sensores (acelerómetro y giróscopo) en el presupuesto total es muy bajo (4\%).

A partir de el análisis realizado se decide por adquirir una placa ya dise?ada que contenga los sensores necesarios. Existe una gran diversidad de soluciones de instrumentación en el mercado. Debido a los requerimientos del proyecto se descartaron muchas de ellas. Las opciones consideradas finalmente se resumen en una tabla en el anexo. La característica común a todas ellas es que pueden medir 6 grados de libertad, la misma cantidad de variables del sistema a controlar (tres coordenadas correspondientes a la posición del centro de masa, raw, yaw, pitch) %TODO ANEXO.

Los criterios que se fijaron para definir la instrumentación fueron los siguientes:
\begin{itemize}
\item
Rango de medidas de los sensores
\item
Capacidad de cómputo
\item
Facilidad de programación (algunas placas incluyen microprocesadores)
\item
Comunicación disponible 
\item
Compatibilidad con el resto del sistema
\item
Costo
\end{itemize}

En lo que respecta al rango de medida de los acelerómetros se definió que el mismo fuera de 3g. Dicha elección está fundamentada en que se planea un vuelo en el cual no se precisen considerar aceleraciones que sean muy superiores a la de la caída libre.  Asimismo, se definió como rango de medida de los giróscopos un valor  superior a los 300°/s, de forma que el sistema pueda realizar un giro casi completo en cualquiera de los tres ejes en 1 segundo. 
%TODO Masmenos 3g y masomenos 300
Lo que se observa es que todos los acelerómetros y giroscopos de las placas de esta preselección cumplen con dicho requerimiento.


\begin{table}[H]
\begin{tabular}{p{115pt}|p{55pt}|p{65pt}|p{55pt}|p{90pt}|} 
\cline{2-5} 
& \multicolumn{2}{|c|}{\cellcolor[gray]{0.7}\textbf{Acelerómetro}} 
& \multicolumn{2}{|c|}{\cellcolor[gray]{0.7}\textbf{Giróscopo}}  \\ \cline{2-5}
& \cellcolor[gray]{0.8} \textbf{Rango} 
& \cellcolor[gray]{0.8} \textbf{Sensibilidad}
& \cellcolor[gray]{0.8} \textbf{Rango} 
& \cellcolor[gray]{0.8} \textbf{Sensibilidad} \\ \cline{2-5} \hline
\multicolumn{1}{|c|}{\cellcolor[gray]{0.8}\textbf{CHR-6d}}
& 3g & 300mV/g &  400°/s ó 100°/s &  2.5mV/(°/s) ó 2.5mV/(°/s) \\ \hline
\multicolumn{1}{|p{115pt}|}{\cellcolor[gray]{0.8}\textbf{Atomic IMU}}
&  1.5g  ;  6g &  800mV/g   200mV/g &  300°/s  &  3.3mV/(°/s)\\ \hline
\multicolumn{1}{|p{115pt}|}{\cellcolor[gray]{0.8}\textbf{IMU Digital Combo Board}}
&  2g  ;  16g &  356LSB/g   321LSB/g &  2000°/s  &  14.375 LSB/(°/s)\\ \hline
\multicolumn{1}{|p{115pt}|}{\cellcolor[gray]{0.8}\textbf{IMU Analgo Combo Board Razor}}
&  3g &  300mV/g  &  300°/s  1200°/s &  3.3mV/(°/s)  0.83mV/(°/s)\\ \hline
\multicolumn{1}{|p{115pt}|}{\cellcolor[gray]{0.8}\textbf{IMU Fusion Board}}
&  2g &  256 LSB/g  &  250°/s  2000°/s &  131 LSB/(°/s)     16.4 LSB/(°/s)\\
\hline 
\end{tabular}
\caption{Sensores}
\label{tab:sensores}
\end{table}

Resulta conveniente que la instrumentación posea un microprocesador, la razón es que le ahorra tiempo a la inteligencia del sistema en el procesamiento de las medidas crudas de los sensores. Los sensores presentan sus medidas constantemente en forma analógica o digtal dependiendo del sensor en cuestión. En caso de ser una medida analógica se debe en primer lugar digitalizar. Una vez que se tiene la medida digitalizada se debe realizar un procesamiento que consiste básicamente en ponerle una marca de tiempo a cada medida y asociarle una etiqueta correspondiente al sensor que la realizó. 
%TODO ver si finalmente lo hacemos así
Resulta sumamente interesante que no sea el \emph{core} quien se encarga de esta identificación, sino que obtenga los datos pre-procesados. Por esta razón se favorecieron las placas que incluyeran un microprocesador. 


\begin{table}[H]
\begin{tabular}{p{110pt}|p{65pt}|p{65pt}|p{60pt}|p{60pt}|} 

\cline{2-5} 
& \cellcolor[gray]{0.8} \textbf{Frecuencia reloj} 
& \cellcolor[gray]{0.8} \textbf{Largo de palabra}
& \cellcolor[gray]{0.8} \textbf{RAM} 
& \cellcolor[gray]{0.8} \textbf{Flash}\\ \cline{2-5} \hline
\multicolumn{1}{|p{110pt}|}{\cellcolor[gray]{0.8}\textbf{CHR-6d}}
&  72MHz &  32 bits &  20Kb &  64Kb \\ \hline
\multicolumn{1}{|p{110pt}|}{\cellcolor[gray]{0.8}\textbf{Atomic IMU}}
&  10MHz  &  8 bits &  2Kb  &  32Kb \\ \hline
\multicolumn{1}{|p{110pt}|}{\cellcolor[gray]{0.8}\textbf{IMU Digital Combo Board}}
&  - &  - &  -  &  -\\ \hline
\multicolumn{1}{|p{110pt}|}{\cellcolor[gray]{0.8}\textbf{IMU Analgo Combo Board Razor}}
&  - &  -  &  - &  -\\ \hline
\multicolumn{1}{|p{110pt}|}{\cellcolor[gray]{0.8}\textbf{IMU Fusion Board}}
&  - &  -  &  - &  -\\
\hline 
\end{tabular}
\caption{Características de los microprocesadores}
\label{tab:micro}
\end{table}

En caso de optar por una placa con microprocesador resulta fundamental que la misma sea sencilla de programar. Las razones son evidentes, si los algoritmos que vienen programados de fábrica no resultan adecuados para la aplicación se pueden modificar fácilmente. También parece importante que el código de fábrica sea abierto; en primer lugar para comprender su funcionamiento y poder procesar adecuadamente los datos que se obtengan de los sensores. Es interesante además poder modificar secciones puntuales de código, sin necesidad de reprogramar completamente el microprocesador. 

La comunicación no resultó un factor crítico ya que todos los candidatos a \emph{core} poseen diversas interfaces (UART, I2C, Converoares AD). Sin embargo, debido a la familiarización que se tenía con las comunicaciones serie se prefirió dar prioridad a aquellas placas que se comunicaran Via UART (en caso que se optara por una placa con microprocesador).

En lo que respecta a compatibilidad con el sistema, se buscó que la alimentación de la placa sea la misma que la del microprocesador principal. Por dicha razón lo ideal es que la placa pueda ser alimentada a 5V.

A partir de las consideraciones anteriores, se considera que la solución más adecuada para el objetivo que se plantea en esta sección es la placa Atomic IMU. Dicha placa cumple con los rangos de medida especificados anteriormente, posee un microprocesador de 8 bits con un reloj de 10MHz. Existe ya un código en c disponible para programar el dispositivo. El mismo puede ser modificado en caso de no cumplir con todos los requerimientos necesarios. La placa dispone de un puerto JTAG para la programación del mismo. La forma que tiene la placa de presentar los datos obtenidos de los sensores es a través de un puerto serie capaz de transmitir datos con una tasa de transferencia de 115.200bps. Cabe aclarar que la Atomic IMU es la única de las soluciones consideradas que puede ser alimentada con una fuente de tensión de 5V. Por otra parte el costo de la misma es de los más bajos dentro de las posibilidades consideradas.

En la figura \ref{fig:IMU} se puede observar la instrumentación escogida:

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.3\textwidth]{./Pics/IMU.jpg}
	\caption{Atomic IMU}
	\label{fig:IMU}
\end{figure}

%TODO GPS 



\end{document}

Algunos layouts para poner imágnenes. Copien y peguen nomás. Hay figura común, dos figuras en 1 onda fig 3a y 3b, wrapfigures y una matriz de figuras. Ta bueno, todas quedan lindas y andan bien.

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.75\textwidth]{./Pics/		.eps}
	\caption{		}
	\label{fig:		}
\end{figure}

\begin{figure} [h!]
  \centering
  \subfloat[caption 1]{\label{fig:		}
  		\includegraphics[width=0.45\textwidth]
  			{./Pics/		.eps}}
  \subfloat[caption 2]{\label{fig:		} 
  		\includegraphics[width=0.45\textwidth]
  			{./Pics/ 		.eps}}
  \caption{Caption general}
  \label{fig:	label general	}
\end{figure}

\begin{wrapfigure}{l}{0.6\textwidth}
  \vspace{-20pt}
  \begin{center}
    \includegraphics[width=0.45\textwidth]
    	{./Pics/		.eps}
  \end{center}
  \vspace{-20pt}
  \caption{		}
  \label{ 		}
  \vspace{-10pt}
\end{wrapfigure}

\begin{figure} [h!]
  \begin{center}
    \begin{tabular}{cc}
      \resizebox{50mm}{!}
      	{\includegraphics{./Pics/ 	.eps}} &
      \resizebox{50mm}{!}
      	{\includegraphics{./Pics/	.eps}} \\
      \resizebox{50mm}{!}
      	{\includegraphics{./Pics/	.eps}} &
      \resizebox{50mm}{!}
      	{\includegraphics{./Pics/	.eps}} \\
    \end{tabular}
    \caption{ 		}
    \label{ 		}
  \end{center}
\end{figure}