\documentclass[spanish,12pt,a4paper,titlepage]{report}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{float}
\usepackage{wrapfig}
\usepackage{multirow}
\usepackage{caption}
\usepackage[spanish]{babel}
\usepackage[dvips]{hyperref}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{array}
\usepackage[table]{xcolor}
\usepackage{multirow}
%\usepackage[Sonny]{fncychap}
%\usepackage[Glenn]{fncychap}
\usepackage[Conny]{fncychap}
%\usepackage[Rejne]{fncychap}
%\usepackage[Bjarne]{fncychap}
\usepackage{subfiles}
\usepackage{framed}

\setlength{\topmargin}{-1.5cm}
\setlength{\textheight}{25cm}
\setlength{\oddsidemargin}{0.3cm} 
\setlength{\textwidth}{15cm}
\setlength{\columnsep}{0cm}

\begin{document}

\title{ Análisis de la performance del GPS\\ Canmore GT-730F\\}

\author{uQuad\\Facultad de Ingeniería - UdelaR}
\maketitle

\tableofcontents

\newpage
%--------------------------------------------------------------------------------------
%--------------------------------------------------------------------------------------

\section{Introducción}
\label{sec:introduccion}

Se pretende utilizar un GPS para asistir en la localización del quadcopter. Resulta de interés analizar la performance del mismo, ya que no se dispone de mucha información al respecto.

El experimento que se diseñó consiste en marcar un rectángulo sobre el suelo (pasto), utilizando 6 puntos, con la siguiente disposición:

\begin{quote}
\begin{quote}
\begin{quote}
\begin{verbatim}
<- <- Av Italia hacia el centro <- <-

4                5                6
x ---- ---- ---- x ---- ---- ---- x
|                                 |
|                                 |

|                                 |
|                                 |
x ---- ---- ---- x ---- ---- ---- x
1                2                3

-> -> Av Italia hacia el este -> ->
\end{verbatim}
\end{quote}
\end{quote}
\end{quote}

Todas las líneas punteadas son de 1m de largo, lo que resulta en un rectángulo de 1m por 2m.

Los pasos a seguir son los siguientes:

\begin{enumerate}
\item Construir un rectángulo como el mencionado sobre un superficie plana.
\item Medir, con un metro, las distancias entre todos los puntos.
\item Utilizar mínimos cuadrados para minimizar el error entre las distancias esperadas, y las experimentales. Esto puede llevar a trabajar con un polígono que \textbf{no} sea un rectángulo, pero el error será menor que el que resultaría de usar los valores teóricos.
\item Fijar la altura y la orientación del GPS, y tomar medidas en cada uno de los puntos \verb+[1,2,3,4,5,6]+.
\item Tomar un punto como origen, y comparar la figura que resulta de los datos provenientes del GPS con las medidas tomadas con el metro.
\end{enumerate}

Este experimento permitirá estimar, en un caso muy hipotético, la performance que se puede esperar del GPS. El caso real, montado en el quad, estará afectado por vibraciones e interferencia causada por la presencia de los motores y la electrónica.

De cualquiera forma, este experimento sirve para establecer que \textbf{no} se puede esperar del GPS.

\newpage

\section{Experimento}
\label{sec:experimento}

En la figura \ref{fig:gps_setup.png} se observa el experimento. Se utilizó una escalera para tener el GPS a una altura fija, separado del piso. Al nivel del piso los rebotes degradan seriamente la performance del GPS. Las 4 patas de la escalera se utilizaron para alinear el punto que se deseaba medir.

\textbf{NOTA:} Se probaron distintas orientaciones. Cabe destacar que la posición absoluta de los puntos medidos con la escalera en distintas orientaciones darán distintos resultados, ya que el centro de las 4 patas no coincide con la posición del GPS, que estaba fijo a la parte más alta de la escalera. Esto implica que no tiene sentido comparar medidas correspondientes a distintas orientaciones, sino comparar los datos de cada orientación contra las medidas tomadas con el metro.

\begin{figure}[h!]
  \begin{center}
  \includegraphics[width=.8\textwidth]{./img/gps_setup.png}
  \end{center}
  \caption{Experimento con el GPS.}
  \label{fig:gps_setup.png}
\end{figure}

\newpage

\subsection{Posibles fuentes de rebotes/interferencia}
\label{sec:posibles-fuentes-de-rebotes-interferencia}

Se buscó un lugar abierto, para evitar errores que puedan surgir por rebotes en paredes, edificios, etc. De cualquier forma, no se hizo el experimento en un lugar completamente abierto, ya que no se contaba con uno.

En la figura \ref{fig:gps_interf.jpg} y \ref{fig:gps_interf1.jpg} se muestran posibles fuentes de rebotes/interferencia:

\begin{figure}[h!]
  \begin{center}
  \includegraphics[width=.9\textwidth]{./img/gps_interf.jpg}
  \end{center}
  \caption{Rebotes/Interferencia: Edificio con antena.}
  \label{fig:gps_interf.jpg}
\end{figure}

\newpage
\begin{figure}[h!]
  \begin{center}
  \includegraphics[width=.9\textwidth]{./img/gps_interf1.jpg}
  \end{center}
  \caption{Rebotes/Interferencia: Edificio.}
  \label{fig:gps_interf1.jpg}
\end{figure}

\newpage
\section{Estimación de la posición de un punto fijo}
\label{sec:estimacion-de-la-posicion-de-un-punto-fijo}

Antes de proceder con el experimento, se tomaron medidas de la ubicación de algunos de los vértices del polígono. Si el ruido asociado a esta medida supera 1m, entonces no vale la pena hacer el resto del experimento. No será posible estimar, de manera razonable, la posición de los vértices del polígono, ya que estos están distan, en algunos casos, solamente 1m entre sí.

Se tomaron medidas con el GPS en dos orientaciones. En las figuras TODO se observan los datos resultantes luego de aproximadamente 1 minuto con el GPS quieto. En todas las gráficas se muestran los datos luego de restar el promedio, o sea que se muestra el error respecto al valor promedio.

\subsection{Punto 1}
\label{sec:punto-1}

\begin{figure}[h!]
  \hspace{-70pt}
  \includegraphics[width=1.3\textwidth]{./img/log_09_individual.png}
  \caption{GPS quieto en el punto 1, orientado [usb-led, 1-2].}
  \label{fig:log_09_individual.png}
\end{figure}

\begin{figure}[h!]
  \hspace{-70pt}
  \includegraphics[width=1.3\textwidth]{./img/log_10_individual.png}
  \caption{GPS quieto en el punto 1, orientado [usb-led, 2-1].}
  \label{fig:log_09_individual.png}
\end{figure}

\newpage
\subsection{Punto 4}
\label{sec:punto-4}

\begin{figure}[h!]
  \hspace{-70pt}
  \includegraphics[width=1.3\textwidth]{./img/log_08_individual.png}
  \caption{GPS quieto en el punto 4, orientado [usb-led, 1-2].}
  \label{fig:log_08_individual.png}
\end{figure}

\begin{figure}[h!]
  \hspace{-70pt}
  \includegraphics[width=1.3\textwidth]{./img/log_07_individual.png}
  \caption{GPS quieto en el punto 4, orientado [usb-led, 2-1].}
  \label{fig:log_07_individual.png}
\end{figure}

\subsection{Punto 6}
\label{sec:punto-6}

\begin{figure}[h!]
  \hspace{-70pt}
  \includegraphics[width=1.3\textwidth]{./img/log_06_individual.png}
  \caption{GPS quieto en el punto 6, orientado [usb-led, 1-2].}
  \label{fig:log_06_individual.png}
\end{figure}

\newpage

\begin{figure}[h!]
  \hspace{-70pt}
  \includegraphics[width=1.3\textwidth]{./img/log_05_individual.png}
  \caption{GPS quieto en el punto 6, orientado [usb-led, 2-1].}
  \label{fig:log_05_individual.png}
\end{figure}

\subsection{Punto fijo: Conclusiones}
\label{sec:punto-fijo-conclusiones}

En varios casos se observaron errores del orden del metro, pero en otros el error fue menor a medio metro. No se esperan buenos resultados a priori, la precisión del GPS no parece adecuada para este experimento.

De cualquier forma se procedió con el experimento, tomando datos con el GPS en 4 orientaciones por si la precisión resulta muy sensible a la posición de la antena.

\newpage
\section{Polígono}
\label{sec:poligono}

Como era de esperarse, la precisión del GPS no resultó adecuada para este experimento. En las figuras \ref{fig:polygon_1.png} y \ref{fig:polygon_2.png} se observa lo que debería ser un rectángulo.

\begin{figure}[h!]
  \begin{center}
  \includegraphics[width=1\textwidth]{./img/polygon_1.png}
  \end{center}
  \caption{Primeros 3 intentos de estimar el polígono.}
  \label{fig:polygon_1.png}
\end{figure}

\newpage
\begin{figure}[h!]
  \begin{center}
  \includegraphics[width=1\textwidth]{./img/polygon_2.png}
  \end{center}
  \caption{Segundos 3 intentos de estimar el polígono.}
  \label{fig:polygon_2.png}
\end{figure}

\newpage
\subsection{Errores}
\label{sec:errores}

Las especificaciones del GPS garantizan un error menor a 3m. La distancia de cada punto al punto 1 sirve para mostrar que el GPS cumple con las especificaciones. 

\begin{verbatim}
>> sqrt(easting.^2 + northing.^2)

ans =

  Columns 1 through 2

                         0                         0
         0.554512260087323         0.143700779969825
          4.33004706557553         0.143700779969825
          1.57529195895029         0.862204669928841
          3.46128113366155         0.997959241296461
          1.09657686103998           0.7196747757109

  Columns 3 through 4

                         0                         0
        0.0913813877153522         0.287401564952104
          0.37960034205882         0.287401564952104
         0.583854507635003         0.778438910449184
         0.959566360784181         0.851817377628425
          1.48734655792341          1.29842494542402

  Columns 5 through 6

                         0                         0
         0.521483162980721         0.452924086277894
          1.37072089636507         0.452924086277894
          1.58871200295859          1.06889681896435
         0.913813929586754          1.77030855041003
          1.37520004160367          2.60741605799409
\end{verbatim}

\section{Conclusión}
\label{sec:conclusion}

El GPS funciona como era de esperarse, con un error menor a 3m. Para estimar la posición del quad con más precisión, va a ser necesario recurrir a sensores adicionales, o a algún tipo de manipulación de los datos del GPS.

Este experimento se realizó libre de ruido. El quad agregará vibraciones, interferencia electromagnética, y sera mucho menos estable que el GPS aferrado a una escalera. El error en las medidas de este experimento fue, en general, significativamente menor a 3m, pero una vez montado en el quad, es probable que el error en la información proveniente del GPS sea cercana a los 3m, por culpa de los factores mencionados.

\end{document}